import org.gradle.api.tasks.testing.logging.TestExceptionFormat

plugins {
  alias(libs.plugins.kotlin.jvm)
  alias(libs.plugins.sqldelight)
}

sqldelight {
  databases {
    MyDatabase {
      packageName = "app.cash.sqldelight.postgresql.integration"
      dialect("app.cash.sqldelight:postgresql-dialect:${app.cash.sqldelight.VersionKt.VERSION}")
      expandSelectStar = true
    }
  }
}

dependencies {
  implementation libs.postgresJdbc
  implementation libs.testContainers.postgres
  implementation libs.postgis.geometry
  implementation "app.cash.sqldelight:jdbc-driver:${app.cash.sqldelight.VersionKt.VERSION}"
  implementation libs.truth
}

tasks.withType(Test).configureEach {
  testLogging.exceptionFormat = TestExceptionFormat.FULL
}
