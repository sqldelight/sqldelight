import org.jetbrains.kotlin.gradle.dsl.JvmTarget
import org.jetbrains.kotlin.gradle.tasks.KotlinCompilationTask

plugins {
  alias(libs.plugins.kotlin.multiplatform)
  alias(libs.plugins.android.multiplatform)
  alias(libs.plugins.sqldelight)
}

sqldelight {
  databases {
    CommonDb {
      packageName = "com.sample"
    }
  }
}

kotlin {
  sourceSets {
    androidLibMain {
    }
  }

  iosX64()
  android {
    namespace = "app.cash.sqldelight.multiplatform.project"

    compileSdk = libs.versions.compileSdk.get() as int

    compilerOptions {
      jvmTarget.set(JvmTarget.JVM_1_8)
    }
  }
}

tasks.withType(KotlinCompilationTask.class).configureEach {
  compilerOptions.jvmTarget = JvmTarget.JVM_1_8
}
